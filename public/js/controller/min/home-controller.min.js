$(window).on("load",function(){var t;$(document).on("click","[remove-contact]",function(){var t=this;swal({title:"Excluir",text:"Você tem certeza que deseja excluir o contato?",icon:"warning",buttons:{cancel:{text:"Cancelar",value:!1,visible:!0,className:"",closeModal:!0},confirm:{text:"OK",value:!0,visible:!0,className:"",closeModal:!0}},dangerMode:!0}).then(e=>{e&&$.ajax({url:"/user/remove",type:"POST",dataType:"JSON",data:{id:$(this).attr("user-id")}}).done(function(e){swal(e.message,{icon:"success"}),$(t).closest(".card").remove()}).fail(function(){console.log("error")}).always(function(){console.log("complete")})})}),$(document).on("click","[edit-contact]",function(){var t=$(this).attr("user-id");window.location.href=EDIT_USER+t}),$("#search").on("keydown",function(e){clearTimeout(t);var a=$("#search").val();t=setTimeout(function(){list(1,a)},500)}),$("[search-btn]").click(function(t){t.preventDefault(),list(1,$("#search").val())}),list()});var totalPages,currentPage=1;function list(t=1,e=null){$(".main__grid").block({message:$("#preloader").html()});var a="/user?page="+t;null!=e&&(a="/user/search?page="+t),$.ajax({url:a,type:"POST",dataType:"JSON",data:{query:e}}).done(function(t){populateListHtml(t.data),totalPages=t.data.last_page,currentPage=t.data.current_page,$("#pagination").twbsPagination("destroy");var a={visiblePages:5,next:"Próximo",prev:"Anterior",first:"Primeiro",last:"Último",initiateStartPageClick:!1,onPageClick:function(t,a){list(a,e)}};$("#pagination").twbsPagination($.extend({},a,{totalPages:totalPages,startPage:t.data.current_page}))}).fail(function(){console.log("error")}).always(function(){console.log("complete"),$(".main__grid").unblock()})}function populateListHtml(t){var e="";$.each(t.data,function(t,a){let n=new User(a);e+='<div class="card"><div class="card-header" id="heading'+t+'">   <h5 class="mb-0">     <img src="'+(null!=n.getImage()?IMAGE_FOLDER+n.getImage():DEFAULT_USER_IMAGE)+'" class="img-round" alt="">     <button class="btn btn-link collapsed text-truncate" data-toggle="collapse" data-target="#collapse'+t+'" aria-expanded="false" aria-controls="collapse'+t+'">'+n.getName()+'     </button>      <i class="fas fa-trash btn-attr" user-id="'+n.getId()+'" remove-contact></i>                                  <i class="fas fa-edit btn-attr" user-id="'+n.getId()+'" edit-contact></i>   </h5> </div><div id="collapse'+t+'" class="collapse" aria-labelledby="heading'+t+'" data-parent="#accordion" style=""><div class="card-body "><div class="table-responsive"><table class="table " user-phone><thead><tr><th scope="col" style="width:33.3%">1* número</th> <th scope="col" style="width:33.3%">2* número</th><th scope="col" style="width:33.3%">3* número</th></tr></thead><tbody><tr> <td>'+(null!=n.getPhone()[0]?"("+n.getPhone()[0].phone.substr(0,2)+")"+n.getPhone()[0].phone.substr(2,11):"")+"</td><td>"+(null!=n.getPhone()[1]?"("+n.getPhone()[1].phone.substr(0,2)+")"+n.getPhone()[1].phone.substr(2,11):"")+"</td><td>"+(null!=n.getPhone()[2]?"("+n.getPhone()[2].phone.substr(0,2)+")"+n.getPhone()[2].phone.substr(2,11):"")+"</td></tr> </tbody></table></div> <p><strong>Email: </strong><span>"+(null!=n.email?n.email:"Não informado")+"</span></p> <p><strong>Endereço: </strong><span>"+(null!=n.address&&""!=n.address?n.address:"Não informado")+"</span></p> <p><strong>Informações: </strong><span>"+(null!=n.info&&""!=n.info?n.info:"Não informado")+"</span></p> </div></div></div>"}),e+='<ul id="pagination" class="pagination-sm"></ul>',0==t.data.length&&(e='<h3 class="text-center text-info">Sem nenhum contato</h3>'),$("#accordion").html(e)}